{% extends 'layout.html' %}
{% block content %}
<h2>Servers</h2>
<div class="row mb-3">
  <div class="col"><strong>Next Server Check:</strong> <span id="next-server">Loading...</span></div>
  <div class="col text-end"><button id="trigger-servers" class="btn btn-secondary">Trigger Check</button></div>
</div>
<table class="table" id="servers-table">
  <thead><tr><th>Host</th><th>User</th><th>Active</th><th>Last Check</th><th>Actions</th></tr></thead>
  <tbody></tbody>
</table>
<h3>Add Server</h3>
<form id="add-server-form" class="row g-3">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <div class="col-md-4">
    <label class="form-label">Host</label>
    <input type="text" name="host" class="form-control" required>
  </div>
  <div class="col-md-4">
    <label class="form-label">User</label>
    <input type="text" name="user" class="form-control" value="{{ request.environ['USERNAME'] or '' }}">
  </div>
  <div class="col-md-4">
    <label class="form-label">Key Path</label>
    <input type="text" name="key" class="form-control" value="~/.ssh/id_rsa">
  </div>
  <div class="col-12">
    <button type="submit" class="btn btn-primary">Add Server</button>
  </div>
</form>
{% endblock %}
